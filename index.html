<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Astro Info App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f4f4f4;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      background-color: white;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }
    input[type="date"] {
      padding: 10px;
      margin: 10px 0;
      width: 100%;
    }
    button {
      padding: 10px 20px;
      background-color: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .result {
      margin-top: 20px;
    }
    .result div {
      margin: 5px 0;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Know Your Astro Details</h1>
  <p>Select your date of birth:</p>
  <input type="date" id="dob">
  <button onclick="calculateDetails()">Submit</button>
  
  <div class="result" id="result"></div>
  <button onclick="generateReport()">Download Report</button>
</div>

<script>
function calculateDetails() {
  const dob = new Date(document.getElementById('dob').value);
  if (!dob) {
    alert('Please select a valid date.');
    return;
  }

  const result = document.getElementById('result');
  result.innerHTML = ''; // Clear previous results

  const weekDay = dob.toLocaleString('en-us', { weekday: 'long' });
  const zodiac = getZodiacSign(dob.getDate(), dob.getMonth() + 1);
  const chineseZodiac = getChineseZodiac(dob.getFullYear());
  const islamicDate = new Intl.DateTimeFormat('en-TN-u-ca-islamic', { dateStyle: 'full' }).format(dob);
  const moonPhase = getMoonPhase(dob);

  const luckyNumber = Math.floor(Math.random() * 9) + 1;
  const element = getElement(chineseZodiac.year);
  const stones = getStones(zodiac);

  result.innerHTML = `
    <div><strong>Day of the Week:</strong> ${weekDay}</div>
    <div><strong>Zodiac Sign:</strong> ${zodiac}</div>
    <div><strong>Chinese Zodiac:</strong> ${chineseZodiac.animal}</div>
    <div><strong>Element:</strong> ${element}</div>
    <div><strong>Lucky Stones:</strong> ${stones.join(', ')}</div>
    <div><strong>Lucky Number:</strong> ${luckyNumber}</div>
    <div><strong>Date in Islamic Calendar:</strong> ${islamicDate}</div>
    <div><strong>Moon Phase:</strong> ${moonPhase}</div>
  `;

  // Save the results in local storage
  localStorage.setItem('astroResult', result.innerHTML);
}

function getZodiacSign(day, month) {
  const signs = [
    ['Capricorn', 'Aquarius'], ['Aquarius', 'Pisces'], ['Pisces', 'Aries'], ['Aries', 'Taurus'],
    ['Taurus', 'Gemini'], ['Gemini', 'Cancer'], ['Cancer', 'Leo'], ['Leo', 'Virgo'],
    ['Virgo', 'Libra'], ['Libra', 'Scorpio'], ['Scorpio', 'Sagittarius'], ['Sagittarius', 'Capricorn']
  ];
  const dates = [20, 19, 21, 20, 21, 21, 23, 23, 23, 23, 22, 22];
  return day > dates[month - 1] ? signs[month - 1][1] : signs[month - 1][0];
}

function getChineseZodiac(year) {
  const animals = ['Rat', 'Ox', 'Tiger', 'Rabbit', 'Dragon', 'Snake', 'Horse', 'Goat', 'Monkey', 'Rooster', 'Dog', 'Pig'];
  return { year, animal: animals[(year - 4) % 12] };
}

function getElement(year) {
  const elements = ['Wood', 'Fire', 'Earth', 'Metal', 'Water'];
  return elements[Math.floor((year % 10) / 2)];
}

function getStones(zodiac) {
  const stones = {
    Aries: ['Diamond', 'Ruby'], Taurus: ['Emerald', 'Rose Quartz'], Gemini: ['Pearl', 'Citrine'],
    Cancer: ['Moonstone', 'Ruby'], Leo: ['Peridot', 'Sunstone'], Virgo: ['Sapphire', 'Jade'],
    Libra: ['Opal', 'Lapis Lazuli'], Scorpio: ['Topaz', 'Malachite'], Sagittarius: ['Turquoise', 'Citrine'],
    Capricorn: ['Garnet', 'Onyx'], Aquarius: ['Amethyst', 'Aquamarine'], Pisces: ['Aquamarine', 'Bloodstone']
  };
  return stones[zodiac] || ['Unknown'];
}

function getMoonPhase(date) {
  const lunarCycle = 29.53;
  const knownNewMoon = new Date('2020-06-21'); // Reference New Moon date
  const daysSinceKnownNewMoon = (date - knownNewMoon) / (1000 * 60 * 60 * 24);
  const phase = (daysSinceKnownNewMoon % lunarCycle) / lunarCycle;

  if (phase < 0.03 || phase > 0.97) return 'New Moon';
  if (phase < 0.25) return 'First Quarter';
  if (phase < 0.50) return 'Full Moon';
  if (phase < 0.75) return 'Last Quarter';
  return 'Waning Crescent';
}

function generateReport() {
  const result = document.getElementById('result').innerHTML;
  const blob = new Blob([result], { type: 'text/html' });
  const url = URL.createObjectURL(blob);

  const a = document.createElement('a');
  a.href = url;
  a.download = 'Astro_Report.html';
  a.click();
  URL.revokeObjectURL(url);
}
</script>

</body>
</html>
